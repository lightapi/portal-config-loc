(this["webpackJsonplogin-view"]=this["webpackJsonplogin-view"]||[]).push([[0],{81:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(12),r=n.n(o),c=n(39),i=(n(81),n(7)),s=n(69),l=n(11),u=n(141),d=n(136),j=n(134),m=n(139),b=n(137),p=n(140),h=n(35),O=n.n(h),f=n(42),g=n(135),x=n(129),v=n(131),w=n(132),S=n(126),y=n(133),_=n(3),C=Object(S.a)((function(e){return{error:{color:"#ff0000"}}}));var k=function(e){var t,n=C();return Object(_.jsx)("div",{className:n.error,dangerouslySetInnerHTML:(t=e.error,{__html:t})})},T=n(65),N=n(51);var P=function(e){var t=e.onSuccess,n=Object(T.useGoogleLogin)({onSuccess:t,onFailure:function(e){console.log("Login failed: res:",e),alert("Failed to login. Please ping this to support@lightapi.net")},clientId:"654131058807-15p8l5r4ddlusbeavvhiin9rt2cuglh6.apps.googleusercontent.com",accessType:"offline",responseType:"code"}).signIn;return Object(_.jsx)(N.GoogleLoginButton,{onClick:n})},E=n(66),W=n.n(E);var R=function(e){var t=e.onSuccess;return Object(_.jsx)(W.a,{appId:"603230757035427",autoLoad:!1,fields:"name,email",scope:"public_profile,email",callback:t,render:function(e){return Object(_.jsx)(N.FacebookLoginButton,{onClick:e.onClick})}})},L=Object(S.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},loginButtons:{width:"100%",marginTop:e.spacing(1)}}}));var U=function(){var e=L(),t=window.location.search,n=new URLSearchParams(t),o=Object(a.useState)(""),r=Object(l.a)(o,2),i=r[0],h=r[1],S=Object(a.useState)(""),C=Object(l.a)(S,2),T=C[0],N=C[1],E=Object(a.useState)(!1),W=Object(l.a)(E,2),U=W[0],D=W[1],A=Object(a.useState)(null==n.get("state")?"":n.get("state")),I=Object(l.a)(A,1)[0],F=Object(a.useState)(null==n.get("client_id")?"":n.get("client_id")),B=Object(l.a)(F,1)[0],H=Object(a.useState)(null==n.get("user_type")?"":n.get("user_type")),q=Object(l.a)(H,1)[0],V=Object(a.useState)(null==n.get("redirect_uri")?"":n.get("redirect_uri")),K=Object(l.a)(V,1)[0],J=Object(a.useState)(""),G=Object(l.a)(J,2),M=G[0],z=G[1],Q=Object(a.useState)(null),X=Object(l.a)(Q,2),Y=X[0],$=X[1],Z=Object(a.useState)(null),ee=Object(l.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(a.useState)([]),oe=Object(l.a)(ae,2),re=oe[0],ce=oe[1],ie=function(e){e.preventDefault(),window.location.href=Y};function se(){return console.log("scopes =",re),Object(_.jsx)(x.a,{component:"nav","aria-label":"secondary mailbox folders",children:re.map((function(e,t){return Object(_.jsx)(v.a,{button:!0,children:Object(_.jsx)(w.a,{primary:e})},t)}))})}return null!==Y?Object(_.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(j.a,{}),Object(_.jsx)("div",{className:e.paper,children:Object(_.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:ie,children:[Object(_.jsx)(f.a,{component:"h1",variant:"h5",children:"Consent"}),"This application would like to access:",Object(_.jsx)(g.a,{}),Object(_.jsx)(x.a,{component:"nav","aria-label":"secondary mailbox folders",children:Object(_.jsx)(se,{})}),Object(_.jsx)(g.a,{}),Object(_.jsx)(d.a,{type:"submit",variant:"contained",onClick:function(e){e.preventDefault();var t=Y.split("/"),n=t[0]+"//"+t[2]+"/logout";fetch(n,{credentials:"include"}).then((function(e){if(!e.ok)throw Error(e.statusText);window.location.href=te})).catch((function(e){console.log("error=",e),z(e.toString())}))},className:e.submit,children:"Deny"}),Object(_.jsx)(d.a,{type:"submit",variant:"contained",color:"primary",onClick:ie,className:e.submit,children:"Accept"})]})})]}):Object(_.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(j.a,{}),Object(_.jsxs)("div",{className:e.paper,children:[Object(_.jsx)(u.a,{className:e.avatar,children:Object(_.jsx)(O.a,{})}),Object(_.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(_.jsx)(k,{error:M}),Object(_.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault();var t={j_username:i,j_password:T,remember:U?"Y":"N",client_id:B};Object.assign(t,I&&{state:I},q&&{user_type:q},K&&{redirect_uri:K});var n=Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"),a=Object(s.a)({"Content-Type":"application/x-www-form-urlencoded"},Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SAAS_URL&&{service_url:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SAAS_URL});fetch("/oauth2/N2CMw0HGQXeLvC1wBfln2A/code",{method:"POST",redirect:"follow",credentials:"include",headers:a,body:n}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){$(e.redirectUri),ne(e.denyUri),ce(e.scopes)})).catch((function(e){e.text().then((function(e){console.log("error=",e);var t={host:"lightapi.net",service:"user",action:"loginUser",version:"0.1.0",data:{email:i,password:T}},n="/portal/query?cmd="+encodeURIComponent(JSON.stringify(t));z('Login Failed! Click <a href="link">here</a> to identify root cause.'.replace("link",n))}))}))},children:[Object(_.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"j_username",label:"Email",name:"j_username",value:i,autoComplete:"username",autoFocus:!0,onChange:function(e){h(e.target.value)}}),Object(_.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"j_password",value:T,label:"Password",type:"password",id:"j_password",autoComplete:"password",onChange:function(e){N(e.target.value)}}),Object(_.jsx)(m.a,{name:"state",value:I,type:"hidden",id:"state"}),Object(_.jsx)(m.a,{name:"client_id",value:B,type:"hidden",id:"client_id"}),Object(_.jsx)(m.a,{name:"user_type",value:q,type:"hidden",id:"user_type"}),Object(_.jsx)(m.a,{name:"redirect_uri",value:K,type:"hidden",id:"redirect_uri"}),Object(_.jsx)(b.a,{control:Object(_.jsx)(p.a,{value:"remember",color:"primary"}),label:"Remember me",onChange:function(e){D(e.target.value)}}),Object(_.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Sign In"})]}),Object(_.jsxs)("div",{children:["Forget your password? ",Object(_.jsx)(c.b,{to:"/forget",children:"Reset Here"})]}),Object(_.jsxs)("div",{className:e.loginButtons,children:[Object(_.jsx)(P,{onSuccess:function(e){console.log("Google Login Success: authorization code:",e.code),console.log("referrer: ",document.referrer);var t=document.referrer.split("/"),n=t[0]+"//"+t[2];console.log("host = ",n),fetch(n+"/google?code="+e.code,{redirect:"follow",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){console.log("data =",e),$(e.redirectUri),ne(e.denyUri),ce(e.scopes)})).catch((function(e){e.text().then((function(e){z(e)}))}))}}),Object(_.jsx)(R,{onSuccess:function(e){console.log("Login Success: accessToken:",e.accessToken),console.log("referrer: ",document.referrer);var t=document.referrer.split("/"),n=t[0]+"//"+t[2];console.log("host = ",n),fetch(n+"/facebook?accessToken="+e.accessToken,{redirect:"follow",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){console.log("data =",e),$(e.redirectUri),ne(e.denyUri),ce(e.scopes)})).catch((function(e){e.text().then((function(e){z(e)}))}))}})]})]})]})},D=n(38),A=n.n(D),I=n(52),F=Object(S.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var B=function(e){var t=new URLSearchParams(e.location.search),n=F(),o=Object(a.useState)(""),r=Object(l.a)(o,2),c=r[0],i=r[1],s=Object(a.useState)(""),b=Object(l.a)(s,2),p=b[0],h=b[1],g=Object(a.useState)(""),x=Object(l.a)(g,2),v=x[0],w=x[1],S=Object(a.useState)(null==t.get("email")?"":t.get("email")),C=Object(l.a)(S,1)[0],T=Object(a.useState)(null==t.get("token")?"":t.get("token")),N=Object(l.a)(T,1)[0],P=function(){var e=Object(I.a)(A.a.mark((function e(t,n,a){var o,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",body:JSON.stringify(a),headers:n});case 3:if((o=e.sent).ok){e.next=6;break}throw o;case 6:return e.next=8,o.json();case 8:e.sent,w("The password has been reset."),e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,e.t0.json();case 16:r=e.sent,console.log(r),w(r.description);case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(_.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(j.a,{}),Object(_.jsxs)("div",{className:n.paper,children:[Object(_.jsx)(u.a,{className:n.avatar,children:Object(_.jsx)(O.a,{})}),Object(_.jsx)(f.a,{component:"h1",variant:"h5",children:"Reset Password"}),Object(_.jsx)(k,{error:v}),Object(_.jsxs)("form",{className:n.form,noValidate:!0,onSubmit:function(e){e.preventDefault();P("/portal/command",{"Content-Type":"application/json"},{host:"lightapi.net",service:"user",action:"resetPassword",version:"0.1.0",data:{email:C,token:N,newPassword:c,passwordConfirm:p}})},children:[Object(_.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,disabled:!0,fullWidth:!0,id:"email",label:"Email",name:"email",value:C,autoComplete:"email",autoFocus:!0}),Object(_.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"newPassword",value:c,label:"New Password",type:"password",id:"newPassword",autoComplete:"newPassword",onChange:function(e){i(e.target.value)}}),Object(_.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"passwordConfirm",value:p,label:"Password Confirm",type:"password",id:"passwordConfirm",autoComplete:"passwordConfirm",onChange:function(e){h(e.target.value)}}),Object(_.jsx)(m.a,{name:"token",value:N,type:"hidden",id:"token"}),Object(_.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:n.submit,children:"Submit"})]})]})]})},H=Object(S.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var q=function(){var e=H(),t=Object(a.useState)(""),n=Object(l.a)(t,2),o=n[0],r=n[1],c=Object(a.useState)(""),i=Object(l.a)(c,2),s=i[0],b=i[1],p=function(){var e=Object(I.a)(A.a.mark((function e(t,n,a){var o,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,{method:"POST",body:JSON.stringify(a),headers:n});case 3:if((o=e.sent).ok){e.next=6;break}throw o;case 6:return e.next=8,o.json();case 8:e.sent,b("An Email has been sent."),e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(0),e.next=16,e.t0.json();case 16:r=e.sent,console.log(r),b(r.description);case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(_.jsxs)(y.a,{component:"main",maxWidth:"xs",children:[Object(_.jsx)(j.a,{}),Object(_.jsxs)("div",{className:e.paper,children:[Object(_.jsx)(u.a,{className:e.avatar,children:Object(_.jsx)(O.a,{})}),Object(_.jsx)(f.a,{component:"h1",variant:"h5",children:"Forget Password"}),Object(_.jsx)(k,{error:s}),Object(_.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault();p("/portal/command",{"Content-Type":"application/json"},{host:"lightapi.net",service:"user",action:"forgetPassword",version:"0.1.0",data:{email:o}})},children:[Object(_.jsx)(m.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",value:o,autoComplete:"email",autoFocus:!0,onChange:function(e){r(e.target.value)}}),Object(_.jsx)(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Submit"})]})]})]})};var V=function(){return Object(_.jsxs)(i.c,{children:[Object(_.jsx)(i.a,{path:"/",element:Object(_.jsx)(U,{})}),Object(_.jsx)(i.a,{path:"/reset",element:Object(_.jsx)(B,{})}),Object(_.jsx)(i.a,{path:"/forget",element:Object(_.jsx)(q,{})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(68),J=n(138),G=Object(K.a)({typography:{useNextVariants:!0}});r.a.render(Object(_.jsx)(c.a,{children:Object(_.jsx)(J.a,{theme:G,children:Object(_.jsx)(V,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[93,1,2]]]);
//# sourceMappingURL=main.685ba141.chunk.js.map